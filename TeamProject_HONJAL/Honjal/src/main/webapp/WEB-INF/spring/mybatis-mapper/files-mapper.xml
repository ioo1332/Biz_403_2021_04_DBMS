<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="com.callor.gallery.persistance.ext.FileDao">
 
 
 	<select id="selectAll"></select>
 	<select id="findById" resultType="FileDTO">
 		SELECT * FROM tbl_file
 		WHERE file_num = #{file_num}
 	</select>
 	
 	<insert id="insert" parameterType="FileDTO">
 		INSERT INTO tbl_file (
 			file_num, 	file_originname, 	file_upname
 		) VALUES (
	 		#{file_num},	#{file_originname},	#{file_upname}
 		)
 	</insert>
 	

 	<insert id="insertOrUpdate"  parameterType="FileDTO">
 		INSERT INTO tbl_files (
 			file_num, content_num, 	file_originname, 	file_upname
 		) VALUES (
	 		#{file_num}, #{content_num},	#{file_originname},	#{file_upname}
 		)
 		ON DUPLICATE KEY UPDATE
 			file_num = #{file_num},
 			file_originname = #{file_originname},
 			file_upname = #{file_upname}
 	</insert>

 	
 	<insert id="insertWithList"  parameterType="FileDTO">
 		INSERT INTO tbl_file (content_num, file_originname,file_upname )
 		VALUES 
 		<foreach collection="filesList" item="file" separator=", " >
 			(
	 			#{file.content_num},	
	 			#{file.file_originname},	
	 			#{file.file_upname}
 			)
 		</foreach>
 	</insert>

 	<insert id="insertOrUpdateWithList"  parameterType="FileDTO">
 		INSERT INTO tbl_file
 			(file_num, content_num, file_originname,file_upname )
 		VALUES 
 		<foreach collection="filesList" item="file" separator=", " >
 			(
 				#{file.file_num},
	 			#{file.content_num},	
	 			#{file.file_originname},	
	 			#{file.file_upname}
 			)
 		</foreach>
 		AS NEW(f_file_num, f_content_num, f_original, f_upname )
 		ON DUPLICATE KEY UPDATE
	 		file_content_num = f_content_num, 
	 		file_originname = f_originname,
	 		file_upname = f_upname
 	</insert>

 	<update id="update"></update>
 	
 
 </mapper> 